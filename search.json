[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "TBEP-CC",
    "section": "",
    "text": "Preface\nThis is a Quarto book.\nTo learn more about Quarto books visit https://quarto.org/docs/books.\n\n\nCode\n1 + 1\n\n\n[1] 2"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "The Tampa Bay Estuary Program compiles environmental data from multiple partners to report on the status and trends of key indicators of bay health (Monitoring and Indicators Plan). Indicators and reporting methods currently exist for several components of the CCMP, including water quality, benthic and sediment condition, fish communities, seagrasses, and tidal creeks. Open-source methods have been developed using the tbeptools R package (Beck, Schrandt, et al. 2021) that facilitates data synthesis and routine reporting for each of these indicators.\nAdditional indicators of bay health will complement the existing set of indicators. Key indicators currently missing from TBEP routine reporting products include those related to climate change.  The Tampa Bay Regional Planning Council has produced the Regional Resilience Action Plan (RRAP) to assist local governments and municipalities in planning resilience activities in response to climate change.  Fundamental to these activities is the identification of robust indicators of the local effects of climate change.  These may include data descriptive of sea-level rise, droughts, heat waves, or storm frequency/intensity.  The TBEP is supportive of these efforts and intends to identify several climate change indicators that can be operationalized for routine reporting, either through conventional summary graphics or more interactive web-based platforms.\n\nThis project will identify appropriate climate change indicators to support the TBEP and its partners in making informed planning decisions.  Although the primary goal of TBEP is the management of bay health, these indicators could also be used to support community resilience planning as described in the RRAP.  Appropriate data sources will be identified, with emphasis on those that are stable and planned to be reliable sources in the future.  Identifying indicators that represent relative risk of climate change impacts will be emphasized, as opposed to indicators that simply measure change.  All project activities will leverage open science principles as described in the TBEP Strategic Plan (Burke and Amaral 2020) and Data Management SOP (Beck, Raulerson, et al. 2021).\n\n\n\n\n\n\nBeck, Marcus W., G. E. Raulerson, M. C. Burke, J. Whalen, S. Scolaro, and E. T. Sherwood. 2021. “Tampa Bay Estuary Program: Data Management Standard Operating Procedures.” St. Petersburg, Florida.\n\n\nBeck, Marcus W., Meagan N. Schrandt, Michael R. Wessel, Edward T. Sherwood, Gary E. Raulerson, Adhokshaja Achar Budihal Prasad, and Benjamin D. Best. 2021. “Tbeptools: An R Package for Synthesizing Estuarine Data for Environmental Research.” Journal of Open Source Software 6 (65): 3485. https://doi.org/10.21105/joss.03485.\n\n\nBurke, M., and M. Amaral. 2020. “2021-2025 Strategic Plan.” St. Petersburg, Florida."
  },
  {
    "objectID": "data.html#task-1.-assessment-of-available-data-and-coverage",
    "href": "data.html#task-1.-assessment-of-available-data-and-coverage",
    "title": "2  Data",
    "section": "2.1 Task 1. Assessment of available data and coverage",
    "text": "2.1 Task 1. Assessment of available data and coverage\nData descriptive of the risks of climate change can be obtained from several sources. These may include weather or climatological data, long-term tidal gauge data, or in situ water measurements responsive to climate change. Weather and climatological data could be obtained from local weather stations with long-term data, e.g., Tampa International Airport, and could include measures of air temperature, precipitation, and/or storm intensity/frequency. Tidal gauge data are readily available from the NOAA PORTS data retrieval system. Lastly, in situ water measurements could include water temperature, changes in flow hydrology, salinity, and/or pH. Data used to evaluate potential risks related to ocean acidification should also be explored.\nThe permanency and ease of access of each data source should be noted when making recommendations on indicators to operationalize. Further, indicators that communicate the risks associated with climate change are preferred, as opposed to those that simply indicate change. An example is the number of days in a year when temperature exceeds a critical threshold, as compared to temperature alone. An additional example is frequency of sunny day flooding events, as compared to tidal gauge measurements alone.\n\n\nCode\nif (!\"librarian\" %in% rownames(installed.packages()))\n  install.packages(\"librarian\")\nlibrarian::shelf(\n  dplyr, dygraphs, glue, here, leaflet, lubridate, sf,\n  tbep-tech/tbeptools, \n  RColorBrewer, readr, rnoaa, terra, tidyr, webshot2,\n  quiet = T)\n\n# explicitly list packages for renv::dependencies(); renv::snapshot()\nlibrary(dplyr)\nlibrary(dygraphs)\nlibrary(glue)\nlibrary(here)\nlibrary(leaflet)\nlibrary(librarian)\nlibrary(lubridate)\nlibrary(RColorBrewer)\nlibrary(readr)\nlibrary(rnoaa)\nlibrary(sf)\nlibrary(tbeptools)\nlibrary(terra)\nlibrary(tidyr)\nlibrary(webshot2)\n\noptions(readr.show_col_types = F)"
  },
  {
    "objectID": "data.html#temperature",
    "href": "data.html#temperature",
    "title": "2  Data",
    "section": "2.2 Temperature",
    "text": "2.2 Temperature\n\n2.2.1 Observed\nThe rnoaa R package uses NOAA NCDC API v2, which only goes to 2022-09-15.\n\nNCEI Web Services | Climate Data Online (CDO) | National Center for Environmental Information (NCEI)\nData Tools | Climate Data Online (CDO) | National Climatic Data Center (NCDC)\n\n\n2.2.1.1 Weather stations\n\nTampa International Airport\n\nStart Date: 1939-02-01\nEnd Date: 2024-01-07\n\n\nGot token at ncdc.noaa.gov/cdo-web/token. Added variable NOAA_NCDC_CDO_token to:\n\nlocally:\nfile.edit(\"~/.Renviron\")\non GitHub: Repository secrets in Actions secrets · tbep-tech/climate-change-indicators\nGCHN readme\n\nPRCP: Precipitation (tenths of mm)\nTMAX: Maximum temperature (tenths of degrees C)\nTMIN: Minimum temperature (tenths of degrees C)\n\n\n\n\nCode\n# provide NOAA key\noptions(noaakey = Sys.getenv(\"NOAA_NCDC_CDO_token\"))\n\n# Specify datasetid and station\nstn     &lt;- \"GHCND:USW00012842\" # TAMPA INTERNATIONAL AIRPORT, FL US\nstn_csv      &lt;- here(\"data/tpa_ghcnd.csv\")\nstn_meta_csv &lt;- here(\"data/tpa_meta.csv\")\n\nif (!file.exists(stn_meta_csv)){\n  # cache station metadata since timeout from Github Actions\n  stn_meta &lt;- ncdc_stations(\n    datasetid = \"GHCND\", \n    stationid = stn)\n  write_csv(stn_meta$data, stn_meta_csv)\n}\nread_csv(stn_meta_csv)\n\n\n# A tibble: 1 × 9\n  elevation mindate    maxdate    latitude name               datacoverage id   \n      &lt;dbl&gt; &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;\n1       1.8 1939-02-01 2024-01-09     28.0 TAMPA INTERNATION…            1 GHCN…\n# ℹ 2 more variables: elevationUnit &lt;chr&gt;, longitude &lt;dbl&gt;\n\n\nCode\nif (!file.exists(stn_csv)){\n\n  date_beg &lt;- stn_meta$data$mindate\n  date_end &lt;- stn_meta$data$maxdate\n  max_rows &lt;- 1000\n  vars     &lt;- c(\"PRCP\",\"TMIN\",\"TMAX\")\n  \n  n_vars     &lt;- length(vars)\n  days_batch &lt;- floor(max_rows / n_vars)\n  dates &lt;- unique(c(\n    seq(\n      ymd(date_beg), \n      ymd(date_end), \n      by = glue(\"{days_batch} days\")),\n    ymd(date_end)))\n  \n  n_i &lt;- length(dates) - 1\n  for (i in 1:n_i){\n    # for (i in 14:n_i){\n    date_beg &lt;- dates[i]\n    if (i == n_i){\n      date_end &lt;- dates[i+1]\n    } else {\n      date_end &lt;- dates[i+1] - days(1)\n    }\n    print(glue(\"{i} of {n_i}: {date_beg} to {date_end}  ~  {Sys.time()}\"))\n    \n    # retry if get Error: Service Unavailable (HTTP 503)\n    o           &lt;- NULL\n    attempt     &lt;- 1\n    attempt_max &lt;- 10\n    while (is.null(o) && attempt &lt;= attempt_max) {\n      if (attempt &gt; 1)\n        print(glue(\"  attempt {attempt}\", .trim = F))\n      attempt &lt;- attempt + 1\n      try(\n        o &lt;- ncdc(\n          datasetid  = \"GHCND\", \n          stationid  = stn, \n          datatypeid = vars, \n          startdate  = date_beg,\n          enddate    = date_end,\n          limit      = max_rows) )\n    }\n    \n    if (i == 1) {\n      df &lt;- o$data\n    } else {\n      df &lt;- rbind(df, o$data)\n    }\n  }\n  stopifnot(duplicated(df[,1:2])|&gt; sum() == 0)\n  \n  df &lt;- df |&gt; \n    mutate(\n      date     = as.Date(strptime(\n        date, \"%Y-%m-%dT00:00:00\")),\n      datatype = recode(\n        datatype, \n        PRCP = \"precip_mm\", \n        TMIN = \"temp_c_min\", \n        TMAX = \"temp_c_max\"),\n      value    = value / 10) |&gt; \n    select(\n      -station, # station         : all \"GHCND:USW00012842\"\n      -fl_m,    # measurement flag: 3,524 are \"T\" for trace\n      -fl_t,    # time        flag: all \"2400\"\n      -fl_q)    # quality     flag: all \"\"\n  \n  write_csv(df, stn_csv)\n}\n\nd &lt;- read_csv(stn_csv)\n\nd |&gt; \n  select(date, datatype, value) |&gt;\n  filter(datatype %in% c(\"temp_c_min\",\"temp_c_max\")) |&gt;\n  pivot_wider(\n    names_from  = datatype, \n    values_from = value) |&gt;\n  dygraph(main = \"Daily Temperature (ºC)\") |&gt; \n  dyOptions(\n    colors = brewer.pal(5, \"YlOrRd\")[c(5,3)]) |&gt; \n  dySeries(\"temp_c_min\", label = \"min\") |&gt; \n  dySeries(\"temp_c_max\", label = \"max\")\n\n\n\n\n\nFigure 2.1: ?(caption)\n\n\n\nCode\nd |&gt; \n  select(date, datatype, value) |&gt;\n  filter(datatype %in% c(\"precip_mm\")) |&gt;\n  pivot_wider(\n    names_from  = datatype, \n    values_from = value) |&gt;\n  dygraph(main = \"Daily Precipitation (mm)\") |&gt; \n  dySeries(\"precip_mm\", label = \"precip\")\n\n\n\n\n\nFigure 2.2: ?(caption)\n\n\n\n\n\n2.2.1.2 Satellite"
  },
  {
    "objectID": "data.html#precipitation",
    "href": "data.html#precipitation",
    "title": "2  Data",
    "section": "2.3 Precipitation",
    "text": "2.3 Precipitation"
  },
  {
    "objectID": "data.html#sea-level-rise",
    "href": "data.html#sea-level-rise",
    "title": "2  Data",
    "section": "2.4 Sea Level Rise",
    "text": "2.4 Sea Level Rise\nSea level rise occurs from principally two sources: 1) thermal expansion; and 2) freshwater inputs from glacial melting. Data for these trends can be obtained from NOAA’s Sea Level Trends (Figure 2.3)\nTypes of data:\n\nObserved (past, present) - tide gauge - satellite, e.g. Laboratory for Satellite Altimetry / Sea Level Rise\n\nLevel-3 products distributed through NOAA CoastWatch (Sea Level Anomaly and along-track altimetry)\n\nProjected (future). modeled\n\n\n2.4.1 Gauges\n\n\n\nFigure 2.3: Screenshot of NOAA’s Sea Level Trends zoomed into the Tampa Bay.\n\n\n\nPORTS: Tampa Bay PORTS - NOAA Tides & Currents\n\n\n\n2.4.2 Satellite\n\nNOAA / NESDIS / STAR - Laboratory for Satellite Altimetry / Sea Level Rise\n\n\n\nCode\nslr_nc    &lt;- here(\"data/slr/slr_map_txj1j2.nc\")\nr_slr_gcs &lt;- rast(slr_nc)  # 0.5 degree resolution\nr_slr_mer &lt;- projectRasterForLeaflet(r_slr_gcs, method=\"bilinear\")\n\nb &lt;- st_bbox(tbsegshed)\nr_slr_tb_mer &lt;- rast(slr_nc) |&gt; \n  crop(b) # |&gt; \n  # projectRasterForLeaflet(method=\"bilinear\")\n# only one value for Tampa Bay extracted at 0.5 degree resolution\n# values(r_slr_tb_mer, mat=F, na.rm=T)  # 5.368306\n\nb &lt;- st_bbox(tbshed)\nplet(r_slr_mer, tiles=providers$Esri.OceanBasemap) |&gt; \n  addProviderTiles(providers$CartoDB.DarkMatterOnlyLabels) |&gt; \n  addPolygons(data = tbsegshed) |&gt;\n  fitBounds(\n    lng1 = b[[\"xmin\"]], lat1 = b[[\"ymin\"]], \n    lng2 = b[[\"xmax\"]], lat2 = b[[\"ymax\"]])\n\n\n\n\n\nFigure 2.4: ?(caption)"
  },
  {
    "objectID": "data.html#severe-weather",
    "href": "data.html#severe-weather",
    "title": "2  Data",
    "section": "2.5 Severe Weather",
    "text": "2.5 Severe Weather\n\nSWDI vignette • rnoaa"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Beck, Marcus W., G. E. Raulerson, M. C. Burke, J. Whalen, S. Scolaro,\nand E. T. Sherwood. 2021. “Tampa Bay Estuary Program: Data\nManagement Standard Operating Procedures.” St. Petersburg,\nFlorida.\n\n\nBeck, Marcus W., Meagan N. Schrandt, Michael R. Wessel, Edward T.\nSherwood, Gary E. Raulerson, Adhokshaja Achar Budihal Prasad, and\nBenjamin D. Best. 2021. “Tbeptools: An R Package for Synthesizing\nEstuarine Data for Environmental Research.” Journal of Open\nSource Software 6 (65): 3485. https://doi.org/10.21105/joss.03485.\n\n\nBurke, M., and M. Amaral. 2020. “2021-2025 Strategic Plan.”\nSt. Petersburg, Florida."
  }
]